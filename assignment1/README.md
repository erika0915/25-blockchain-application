# Lab1 개념 정리 

## 블록체인 (Blockchain) 
거래 기록(데이터)를 ‘블록’단위로 묶어 순서대로 연결(chain)한 데이터 구조이다. 

예시) 은행 거래 장부를 생각해보자. 하루치 거래를 한 장의 페이지(=블록)에 기록한다. 다음날 거래는 그 다음 페이지에 이어서 적는다. 모든 페이지는 서로 연결되어 있고, 이전 페이지의 요약값을 포함한다. 이렇게 하면 누군가 한 장만 몰래 바꾸어도 전체 기록이 꼬여 버린다.

### 구조 
각 블록은 다음 정보를 포함한다. 
| 항목 | 설명 |
| --- | --- |
| Block Number | 블록 번호  |
| Transaction (Tx) | 거래 내용 (누가 누구에게 얼마를 보냈는가)  |
| Nonce | 퍼즐을 풀기 위한 숫자  |
| Previous Hash (Prev) | 이전 블록의 요약값 (해시) |
| Hash | 현재 블록의 고유 요약값 (이전 + 현재 내용 모두 반영)  |

## 해시(Hash) 함수 
어떤 입력값 (문자열, 파일 등)을 고정된 길이의 무작위 같은 값으로 바꾸는 함수 

### 핵심 특징

- 같은 입력 → 항상 같은 출력
- 입력이 한 글자만 달라도 출력이 완전히 달라진다.
- 결과값(출력)만으로 입력을 추측할 수 없다.

### 예시

```bash
import hashlib
hashlib.sha256("Alice pays Bob $50".encode()).hexdigest()
```

```bash
b21a71e946a47c7b4d8617b2d7c0e98d9dca8d6c239d9dcb71c0c92420edcb0a
```

이건 64자리(=256비트)의 ‘요약값’이다. 문장이 길든 짧든, 결과는 항상 256비트로 동일하다. 

## SHA256 알고리즘 
Bitcoin과 대부분의 블록체인에서 사용하는 암호학적 해시 알고리즘이다. 

- SHA = Secure Hash Algorithm (보안 해시 알고리즘)
- 256 = 결과 길이가 256 비트(=64자리 16진수)

입력 데이터를 ‘디지털 지문’으로 바꾼다고 생각하면 된다.

## Proof of Work (작업증명, PoW) 
블록을 ‘추가할 자격’을 얻기 위해 컴퓨터가 어려운 수학 퍼즐을 푸는 과정 

### 왜 필요한가 ?

블록체인은 중앙 관리자가 없다. 그래서 아무나 ‘내가 새 블록을 만들었어!’라고 말할 수 있다. 이를 막기 위해 ‘정당한 노력(작업)’을 증명해야 블록을 등록할 수 있도록 한다. 

### 퍼즐의 원리

1. 블록의 내용을 해시로 변환 
2. 특정 조건(난이도)을 만족하는 해시를 찾아야 한다. 
    
    예 : 해시값이 `2^240` 보다 작아야 한다는 조건 
    
3. 이거를 만족하려면 Nonce를 계속 바꿔가며 시도해야 한다.

## Nonce (넘스, 임의의 숫자) 
Number used once 의 줄임말이다. 같은 데이터를 계속 해시해도 결과가 같기 때문에 Nonce를 바꿔가면서 새로운 해시값을 얻는 역할을 한다. 

## 난이도 기준 : 2^240

- SHA256 해시는 2^256개의 가능한 결과를 갖는다.
- 그 중 2^240보다 작은 값만 유효한 해시로 인정한다.
- 즉, 상위 16비트 이상이 0에 가까운 값이어야 함을 뜻한다.

이렇게 되면 찾기가 매우 어려워져서, 작업 증명에 시간이 걸린다.

## 블록 연결 (Chaining)

각 블록이 이전 블록의 해시를 저장하여, 순서가 바뀌거나 중간이 수정되면 전체 체인이 무효화되는 구조이다. 

| 블록 | 포함된 데이터 |
| --- | --- |
| Block 1 | Tx + Nonce + Prev=000…0 |
| Block 2 | Tx + Nonce + Prev=Block1의 해시 |
| Block 3 | Tx + Nonce + Prev=Block2의 해시 |

누군가 Block1을 살짝만 수정해도, Block2의 `Prev` 가 달라지고, Block 3, 4, … 전부 바꿔야 하므로 변조가 거의 불가능하다.

## 채굴 (Mining) 
Proof of Work 퍼즐을 푸는 과정 자체

- 누군가  먼저 올바른 Nonce를 찾는가의 경쟁이다.
- 퍼즐을 가장 먼저 푼 사람이 새로운 블록을 추가할 권리를 얻는다.

보상 (Reward) 

실제 블록체인에서는 블록을 성공적으로 만든 사람에게 코인 보상을 준다.

## 블록 검증 (Validation) 
이미 만들어진 블록이 올바른지 확인하는 과정 

검증 절차 

1. 블록 데이터를 다시 해시 계산 
2. 그 값이 2^240 보다 작은가 ? 
3. 이전 블록의 해시 (Prev) 와 연결이 일치하는가 ? 

모두 맞으면 ‘유효한 블록’이다.
